!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Clappr"),require("ClapprStats")):"function"==typeof define&&define.amd?define(["Clappr","ClapprStats"],e):"object"==typeof exports?exports.ClapprNerdStats=e(require("Clappr"),require("ClapprStats")):t.ClapprNerdStats=e(t.Clappr,t.ClapprStats)}(this,function(t,e){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";(function(e){function n(t,e){return null==t?void 0:t[e]}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(){this.__data__=bt?bt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(bt){var n=e[t];return n===I?void 0:n}return pt.call(e,t)?e[t]:void 0}function c(t){var e=this.__data__;return bt?void 0!==e[t]:pt.call(e,t)}function u(t,e){return this.__data__[t]=bt&&void 0===e?I:e,this}function l(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function p(){this.__data__=[]}function f(t){var e=this.__data__,n=x(e,t);return!(n<0)&&(n==e.length-1?e.pop():vt.call(e,n,1),!0)}function d(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]}function h(t){return x(this.__data__,t)>-1}function v(t,e){var n=this.__data__,i=x(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function b(){this.__data__={hash:new r,map:new(yt||l),string:new r}}function m(t){return O(this,t).delete(t)}function g(t){return O(this,t).get(t)}function _(t){return O(this,t).has(t)}function w(t,e){return O(this,t).set(t,e),this}function x(t,e){for(var n=t.length;n--;)if($(t[n][0],e))return n;return-1}function k(t,e){e=E(e,t)?[e]:P(e);for(var n=0,i=e.length;null!=t&&n<i;)t=t[M(e[n++])];return n&&n==i?t:void 0}function S(t){return!(!K(t)||T(t))&&(q(t)||i(t)?dt:et).test(N(t))}function j(t){if("string"==typeof t)return t;if(B(t))return gt?gt.call(t):"";var e=t+"";return"0"==e&&1/t==-V?"-0":e}function P(t){return wt(t)?t:_t(t)}function O(t,e){var n=t.__data__;return F(e)?n["string"==typeof e?"string":"hash"]:n.map}function C(t,e){var i=n(t,e);return S(i)?i:void 0}function E(t,e){if(wt(t))return!1;var n=void 0===t?"undefined":D(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!B(t))||(X.test(t)||!J.test(t)||null!=e&&t in Object(e))}function F(t){var e=void 0===t?"undefined":D(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function T(t){return!!ut&&ut in t}function M(t){if("string"==typeof t||B(t))return t;var e=t+"";return"0"==e&&1/t==-V?"-0":e}function N(t){if(null!=t){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(z);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(R.Cache||y),n}function $(t,e){return t===e||t!==t&&e!==e}function q(t){var e=K(t)?ft.call(t):"";return e==H||e==W}function K(t){var e=void 0===t?"undefined":D(t);return!!t&&("object"==e||"function"==e)}function A(t){return!!t&&"object"==(void 0===t?"undefined":D(t))}function B(t){return"symbol"==(void 0===t?"undefined":D(t))||A(t)&&ft.call(t)==G}function L(t){return null==t?"":j(t)}function U(t,e,n){var i=null==t?void 0:k(t,e);return void 0===i?n:i}var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z="Expected a function",I="__lodash_hash_undefined__",V=1/0,H="[object Function]",W="[object GeneratorFunction]",G="[object Symbol]",J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Y=/^\./,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,tt=/\\(\\)?/g,et=/^\[object .+?Constructor\]$/,nt="object"==(void 0===e?"undefined":D(e))&&e&&e.Object===Object&&e,it="object"==("undefined"==typeof self?"undefined":D(self))&&self&&self.Object===Object&&self,rt=nt||it||Function("return this")(),ot=Array.prototype,at=Function.prototype,st=Object.prototype,ct=rt["__core-js_shared__"],ut=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=at.toString,pt=st.hasOwnProperty,ft=st.toString,dt=RegExp("^"+lt.call(pt).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=rt.Symbol,vt=ot.splice,yt=C(rt,"Map"),bt=C(Object,"create"),mt=ht?ht.prototype:void 0,gt=mt?mt.toString:void 0;r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=c,r.prototype.set=u,l.prototype.clear=p,l.prototype.delete=f,l.prototype.get=d,l.prototype.has=h,l.prototype.set=v,y.prototype.clear=b,y.prototype.delete=m,y.prototype.get=g,y.prototype.has=_,y.prototype.set=w;var _t=R(function(t){t=L(t);var e=[];return Y.test(t)&&e.push(""),t.replace(Q,function(t,n,i,r){e.push(i?r.replace(tt,"$1"):n||t)}),e});R.Cache=y;var wt=Array.isArray;t.exports=U}).call(e,n(7))},function(t,e,n){"use strict";var i;!function(r,o,a){function s(t,e,n){if(t.addEventListener)return void t.addEventListener(e,n,!1);t.attachEvent("on"+e,n)}function c(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return w[t.which]?w[t.which]:x[t.which]?x[t.which]:String.fromCharCode(t.which).toLowerCase()}function u(t,e){return t.sort().join(",")===e.sort().join(",")}function l(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function p(t){if(t.preventDefault)return void t.preventDefault();t.returnValue=!1}function f(t){if(t.stopPropagation)return void t.stopPropagation();t.cancelBubble=!0}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function h(){if(!_){_={};for(var t in w)t>95&&t<112||w.hasOwnProperty(t)&&(_[w[t]]=t)}return _}function v(t,e,n){return n||(n=h()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function b(t,e){var n,i,r,o=[];for(n=y(t),r=0;r<n.length;++r)i=n[r],S[i]&&(i=S[i]),e&&"keypress"!=e&&k[i]&&(i=k[i],o.push("shift")),d(i)&&o.push(i);return e=v(i,o,e),{key:i,modifiers:o,action:e}}function m(t,e){return null!==t&&t!==o&&(t===e||m(t.parentNode,e))}function g(t){function e(t){t=t||{};var e,n=!1;for(e in _)t[e]?n=!0:_[e]=0;n||(k=!1)}function n(t,e,n,i,r,o){var a,s,c=[],l=n.type;if(!y._callbacks[t])return[];for("keyup"==l&&d(t)&&(e=[t]),a=0;a<y._callbacks[t].length;++a)if(s=y._callbacks[t][a],(i||!s.seq||_[s.seq]==s.level)&&l==s.action&&("keypress"==l&&!n.metaKey&&!n.ctrlKey||u(e,s.modifiers))){var p=!i&&s.combo==r,f=i&&s.seq==i&&s.level==o;(p||f)&&y._callbacks[t].splice(a,1),c.push(s)}return c}function i(t,e,n,i){y.stopCallback(e,e.target||e.srcElement,n,i)||!1===t(e,n)&&(p(e),f(e))}function r(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=c(t);if(e)return"keyup"==t.type&&w===e?void(w=!1):void y.handleKey(e,l(t),t)}function a(){clearTimeout(m),m=setTimeout(e,1e3)}function h(t,n,r,o){function s(n){i(r,n,t),"keyup"!==o&&(w=c(n)),setTimeout(e,10)}_[t]=0;for(var u=0;u<n.length;++u){var l=u+1===n.length,p=l?s:function(e){return function(){k=e,++_[t],a()}}(o||b(n[u+1]).action);v(n[u],p,o,t,u)}}function v(t,e,i,r,o){y._directMap[t+":"+i]=e,t=t.replace(/\s+/g," ");var a,s=t.split(" ");if(s.length>1)return void h(t,s,e,i);a=b(t,i),y._callbacks[a.key]=y._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},r,t,o),y._callbacks[a.key][r?"unshift":"push"]({callback:e,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:t})}var y=this;if(t=t||o,!(y instanceof g))return new g(t);y.target=t,y._callbacks={},y._directMap={};var m,_={},w=!1,x=!1,k=!1;y._handleKey=function(t,r,o){var a,s=n(t,r,o),c={},u=0,l=!1;for(a=0;a<s.length;++a)s[a].seq&&(u=Math.max(u,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=u)continue;l=!0,c[s[a].seq]=1,i(s[a].callback,o,s[a].combo,s[a].seq)}else l||i(s[a].callback,o,s[a].combo);var p="keypress"==o.type&&x;o.type!=k||d(t)||p||e(c),x=l&&"keydown"==o.type},y._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)v(t[i],e,n)},s(t,"keypress",r),s(t,"keydown",r),s(t,"keyup",r)}if(r){for(var _,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},x={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},j=1;j<20;++j)w[111+j]="f"+j;for(j=0;j<=9;++j)w[j+96]=j.toString();g.prototype.bind=function(t,e,n){var i=this;return t=t instanceof Array?t:[t],i._bindMultiple.call(i,t,e,n),i},g.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,function(){},e)},g.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},g.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},g.prototype.stopCallback=function(t,e){var n=this;return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!m(e,n.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},g.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},g.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(w[e]=t[e]);_=null},g.init=function(){var t=g(o);for(var e in t)"_"!==e.charAt(0)&&(g[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},g.init(),r.Mousetrap=g,void 0!==t&&t.exports&&(t.exports=g),void 0!==(i=function(){return g}.call(e,n,e,t))&&(t.exports=i)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){e=t.exports=n(6)(void 0),e.push([t.i,".clappr-nerd-stats.container{position:absolute;display:inline-block;top:2em;left:2em;padding:5px;margin:0;line-height:20px;font-size:11px;box-shadow:0 0 0 1px hsla(0,0%,100%,.15);background:rgba(0,0,0,.8);color:#fff;z-index:1000;overflow:auto;max-height:300px;min-width:240px;max-width:75%}.clappr-nerd-stats.container ul{display:inline-block;float:left;padding:5px;min-width:240px;width:33.3333%}.clappr-nerd-stats.container ul,li{list-style-type:none}.clappr-nerd-stats.container li:nth-child(2n){background:hsla(0,0%,100%,.15)}.clappr-nerd-stats.container li{padding:0 5px;text-align:left}.clappr-nerd-stats.container li.title{text-align:center;font-weight:700}.clappr-nerd-stats.container li div{padding-left:5px;margin:0;float:right}.clappr-nerd-stats.icon-show-stats a{z-index:1000;position:absolute;float:right;color:#fff;display:none}.clappr-nerd-stats.icon-show-stats.top-right a{display:block;top:5px;right:10px}.clappr-nerd-stats.icon-show-stats.top-left a{display:block;top:5px;left:10px}.clappr-nerd-stats.icon-show-stats.bottom-right a{display:block;right:10px;bottom:5px}.clappr-nerd-stats.icon-show-stats.bottom-left a{display:block;bottom:5px;left:10px}",""])},function(t,e){t.exports='<%= counters = metrics.counters %> <%= timers = metrics.timers %> <%= extra = metrics.extra %> <div class="clappr-nerd-stats icon-show-stats <%= iconPosition %>" data-show-stats-button> <a>&#9432;</a> </div> <div class="clappr-nerd-stats container"> <ul> <li class=title><span>Counters</span></li> <li> Plays: <div><span><%= counters.play %></span></div> </li> <li> Pauses: <div><span><%= counters.pause %></span></div> </li> <li> Errors: <div><span><%= counters.error %></span></div> </li> <li> Bufferings: <div><span><%= counters.buffering %></span></div> </li> <li> Decoded frames: <div><span><%= counters.decodedFrames %></span></div> </li> <li> Dropped frames: <div><span><%= counters.droppedFrames %></span></div> </li> <li> Frames per second: <div><span><%= counters.fps %></span></div> </li> <li> Bitrate changes: <div><span><%= counters.changeLevel %></span></div> </li> <li> Seeks: <div><span><%= counters.seek %></span></div> </li> <li> Fullscreen: <div><span><%= counters.fullscreen %></span></div> </li> <li> DVR seeks: <div><span><%= counters.dvrUsage %></span></div> </li> </ul> <ul> <li class=title><span>Timers</span></li> <li> Startup time: <div><span><%= timers.startup.toFixed(2) %> ms</span></div> </li> <li> Watching time: <div><span><%= (timers.watch / 1000).toFixed(2) %> sec</span></div> </li> <li> Pause time: <div><span><%= timers.pause.toFixed(2) %> ms</span></div> </li> <li> Buffering time: <div><span><%= timers.buffering.toFixed(2) %> ms</span></div> </li> <li> Session time: <div><span><%= (timers.session / 1000).toFixed(2) %> sec</span></div> </li> <li> Latency: <div><span><%= timers.latency.toFixed(2) %> ms</span></div> </li> </ul> <ul> <li class=title><span>Extra</span></li> <li> Playback: <div><span><%= extra.playbackName %></span></div> </li> <li> Playback type: <div><span><%= extra.playbackType %></span></div> </li> <li> Buffer size: <div><span><%= (extra.buffersize / 1000).toFixed(2) %> sec</span></div> </li> <li> Video duration: <div><span><%= (extra.duration / 1000).toFixed(2) %> sec</span></div> </li> <li> Current time: <div><span><%= (extra.currentTime / 1000).toFixed(2) %> sec</span></div> </li> <li> Bitrate weighted mean: <div><span><%= extra.bitrateWeightedMean.toFixed(2) %> kbps</span></div> </li> <li> Bitrate most used: <div><span><%= extra.bitrateMostUsed.bitrate %> kbps</span></div> </li> <li> % Watched: <div><span><%= extra.watchedPercentage.toFixed(2) %> %</span></div> </li> <li> % Buffering: <div><span><%= extra.bufferingPercentage.toFixed(2) %> %</span></div> </li> <li> Bandwidth: <div><span><%= extra.bandwidth %> kbps</span></div> </li> </ul> </div> '},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";function i(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=i(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(4),u=n(5),l=i(u),p=n(2),f=i(p),d=n(3),h=i(d),v=n(0),y=i(v),b=n(1),m=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._shortcut=(0,y.default)(t,"options.clapprNerdStats.shortcut",["command+shift+s","ctrl+shift+s"]),n._iconPosition=(0,y.default)(t,"options.clapprNerdStats.iconPosition","top-right"),n}return a(e,t),s(e,[{key:"name",get:function(){return"clappr-nerd-stats"}},{key:"template",get:function(){return(0,c.template)(h.default)}},{key:"events",get:function(){return{"click [data-show-stats-button]":"showOrHide"}}}]),s(e,[{key:"bindEvents",value:function(){this.listenToOnce(this.container,c.Events.CONTAINER_READY,this.init)}},{key:"init",value:function(){var t=this,e=this.container.getPlugin("clappr_stats");void 0===e?console.error("clappr-stats not available. Please, include it as a plugin of your Clappr instance.\nFor more info, visit: https://github.com/clappr/clappr-stats."):(b.bind(this._shortcut,function(){return t.showOrHide()}),this.listenTo(e,l.default.REPORT_EVENT,this.onReport),this.style=c.Styler.getStyleFor(f.default,{baseUrl:this.options.baseUrl}),this.metrics=e._metrics,this.render())}},{key:"showOrHide",value:function(t){this.showing?this.hide():(this.show(),this.render()),t.stopPropagation()}},{key:"show",value:function(){this.$el.find(".clappr-nerd-stats.container").show(),this.showing=!0}},{key:"hide",value:function(){this.$el.find(".clappr-nerd-stats.container").hide(),this.showing=!1}},{key:"onReport",value:function(t){this.metrics=t,this.render()}},{key:"render",value:function(){return this.$el.html(this.template({metrics:this.metrics,iconPosition:this._iconPosition})),this.$el.append(this.style),this.container.$el.append(this.el),this.showing||this.hide(),this}}]),e}(c.UIContainerPlugin);e.default=m,t.exports=e.default}])});